<!doctype html>
<html lang="en" class="h-100" data-bs-theme="auto" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SkillSpace 어서오시오</title>

    <link rel="canonical" href="https://getbootstrap.kr/docs/5.3/examples/navbar-fixed/">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
    <!-- <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css" > -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">

    <!-- JQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        body {
            padding-top: 57px;
            background-color: #dee2e6;
        }

        .public-footer {
            background: #f8f9fa;
            padding: 0.5rem 0;
            font-size: 0.875rem;
            text-align: center;
            color: #6c757d;
            width: 100%;
        }

        .container {
            flex: 1;
        }

        .custom-toggler {
            display: block !important; /* 항상 보이도록 설정 */
            background: transparent;
            border: none;
        }

        .custom-toggler:hover {
            background: #e9ecef;
        }

        .custom-toggler .navbar-toggler-icon {
            width: 1.2em; /* 아이콘 크기 줄이기 */
            height: 1.2em;
        }

        .custom-hover {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            padding: 0.8rem 1rem;
        }
        .custom-hover:hover {
            background-color: #d2e0f5; /* 밝은 청록색 */
            color: #0A1828;
        }

        /* 카테고리 메뉴 스타일 */
        .nav-item .nav-link {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            padding: 0.8rem 1rem;
        }


    </style>


</head>

<body class="d-flex flex-column h-100">

    <header class="pt-3 bg-body-tertiary">
        <!-- 헤더 상단 -->
        <div class="container-fluid d-flex flex-wrap justify-content-center justify-content-md-between">
            <a href="/"
                class="d-flex align-items-center mb-2 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
                <span class="fs-4 fw-bold ms-md-2">SkillSpace</span>
            </a>
            <form class="col-12 col-md-auto " role="search">
                <div class="input-group">
                    <input type="text" class="form-control " name="keyword" id="keyword"
                        th:value="${pageMaker.cri.keyword}" placeholder="검색어 입력">
                    <button class="btn btn-outline-secondary btn-sm" type="submit">
                        <i class="bi bi-search"></i>
                    </button>
                </div>
            </form>
        </div>

        <!-- 헤더 하단 -->
        <nav class="navbar navbar-expand-md py-2 bg-body-tertiary">
            <div class="container-fluid d-flex flex-wrap justify-content-between">
                    <button class="navbar-toggler p-1 custom-toggler" type="button" data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasNavbarLight" aria-controls="offcanvasNavbarLight"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
        
                    <div class="collapse navbar-collapse" id="">
                        <ul class="navbar-nav me-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="#">여행/레저</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">아동/가족</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle active" href="#" role="button" data-bs-toggle="dropdown"
                                    aria-expanded="false">
                                    맛집/카페
                                </a>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#">할인권</a></li>
                                    <li><a class="dropdown-item" href="#">식사권</a></li>
                                    <li><a class="dropdown-item" href="#">교환권</a></li>
                                </ul>
                            </li>
                        </ul>
            
                    </div>
                    <ul class="nav">
                        <li class="nav-item"><a href="#" class="nav-link link-body-emphasis px-2">로그인</a></li>
                        <li class="nav-item"><a href="#" class="nav-link link-body-emphasis px-2">회원가입</a></li>
                    </ul>
            </div>
        </nav>

        <!-- 오프캔버스 -->
        <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbarLight"
            aria-labelledby="offcanvasNavbarLightLabel">
            <div class="offcanvas-header border-bottom">
                <h5 class="offcanvas-title" id="offcanvasNavbarLightLabel">SkillSpace</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <!-- 로그인 섹션 -->
                <div class="user-section border-bottom pb-3 mb-3">
                    <div th:if="${session.login_auth == null}">
                        <p class="mb-3">로그인하고 다양한 서비스를 이용해보세요!</p>
                        <div class="d-flex gap-2">
                            <a href="/guest/login" class="btn btn-outline-primary flex-grow-1">로그인</a>
                            <a href="/guest/join" class="btn btn-outline-primary flex-grow-1">회원가입</a>
                        </div>
                    </div>
                    <div th:if="${session.login_auth != null}">
                        <div class="d-flex align-items-center mb-3">
                            <div class="flex-grow-1 ms-3">
                                <p class="fw-bold mb-0" th:text="${session.login_name}">사용자명</p>
                                <small class="text-muted" th:text="${session.login_email}">이메일</small>
                            </div>
                        </div>
                        <div class="d-flex gap-2">
                            <a href="/guest/mypage" class="btn btn-outline-secondary flex-grow-1">마이페이지</a>
                            <a href="/guest/logout" class="btn btn-outline-secondary flex-grow-1">로그아웃</a>
                        </div>
                    </div>
                </div>

                <!-- 카테고리 메뉴 -->
                <div class="accordion" id="categoryAccordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button collapsed custom-hover" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                전체 카테고리
                            </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#categoryAccordion">
                            <div class="accordion-body py-1">
                                <div class="list-group list-group-flush">
                                    <a href="#" class="list-group-item list-group-item-action">전체보기</a>
                                    <a href="#" class="list-group-item list-group-item-action">인기 클래스</a>
                                    <a href="#" class="list-group-item list-group-item-action">신규 클래스</a>
                                    <a href="#" class="list-group-item list-group-item-action">프로그래밍</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                고객지원
                            </button>
                        </h2>
                        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#categoryAccordion">
                            <div class="accordion-body py-0">
                                <ul class="dropdown-menu position-static d-grid gap-1 p-2 rounded-3 mx-0 shadow w-220px" data-bs-theme="light">
                                    <li><a class="dropdown-item rounded-2 active" href="#">Action</a></li>
                                    <li><a class="dropdown-item rounded-2" href="#">Another action</a></li>
                                    <li><a class="dropdown-item rounded-2" href="#">Something else here</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item rounded-2" href="#">Separated link</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>


            </div><!-- offcanvas-body end -->
        </div>
    </header>



    <main class="container">
        <style>
            /* 전체 컨테이너 */
            .reservation-container {
                font-family: 'Noto Sans KR', sans-serif;
                width: 95%; /* 기본적으로 화면 너비의 95%를 차지하게 합니다. */
                margin: auto;
                background-color: #f9f9f9;
                border-radius: 15px;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
                padding: 20px;
            }
        
            /* 날짜 선택 섹션 */
            .date-selection h5 {
                color: #333;
                font-size: 18px;
            }
        
            .calendar-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-top: 10px;
            }
        
            .calendar-header button {
                background-color: #704de4;
                color: white;
                border: none;
                font-size: 16px;
                padding: 5px 10px;
                border-radius: 5px;
                cursor: pointer;
                transition: background-color 0.3s ease-in-out;
            }
        
            .calendar-header button:hover {
                background-color: #563bb7;
            }
        
            #current-month {
                font-size: 16px;
                font-weight: bold;
                color: #333;
            }
        
            /* 캘린더 테이블 */
            .calendar {
                width: 100%;
                border-collapse: collapse;
                margin-top: 10px;
            }
        
            .calendar th {
                text-align: center;
                padding-bottom: 10px;
                color: #999999;
                font-size: 14px;
            }
        
            .calendar td {
                text-align: center;
                /* padding: 15px;  고정 패딩 제거 */
                padding: 2.5vw; /* vw 단위를 사용하여 뷰포트 너비에 따라 동적으로 조절되도록 설정 */
                border-radius: 50%;
                cursor: pointer;
                transition: all 0.2s;
                font-size: 1rem; /* 기본 글꼴 크기 */
            }
             /* 작은 화면에서 글꼴 크기 조정 */
             @media (max-width: 360px) {
                .calendar td {
                    font-size: 0.8rem; /* 글꼴 크기 축소 */
                }
             }
        
            .calendar td:hover {
                background-color: #f3f1ff; /* hover 효과 */
            }
        
            /* 상태별 스타일 */
            .unavailable {
                background-color: #e6e6e6 !important;
                color: #b2b2b2 !important;
                pointer-events: none;
            }
        
            .today {
                background-color: #ffe066 !important;
                color: black !important;
            }
        
            .selected {
                background-color: #704de4 !important;
                color: white !important;
            }
        
            .legend span {
                display: inline-block;
                width: 20px;
                height: 20px;
                margin-right: 10px;
                border-radius: 3px;
            }
        
            /* 텍스트 스타일 */
            .legend {
                display: flex;
                align-items: center;
            }
        
            .legend span+span {
                margin-left: 15px;
                /* 각 아이콘 사이 간격 */
            }
        
            /* 요일별 색상 */
            .sat {
                color: #4a90e2 !important;
                /* 파란색 */
            }
        
            .sun {
                color: #e94e77 !important;
                /* 빨간색 */
            }
        
            /* 선택된 날짜 표시 */
            .selectedDate {
                color: #704de4;
                font-size: 14px;
                font-weight: bold;
            }
        
            /* 시간 선택 섹션 */
            .time-selection h2 {
                font-size: 18px;
                margin-top: 20px;
                color: #333333;
            }
        
            #time-slots button {
                background-color: white;
                border-radius: 5px;
                border: solid 1px #704de4;
                padding: 8px;
                margin-right: 5px;
                margin-bottom: 5px;
                cursor: pointer;
        
                transition: all ease-in-out .3s;
            }
        
            #time-slots button:hover {
                background: #ddd;
            }
        </style>
        
        


    <div class="reservation-container card mt-3">
        <div class="date-selection">
            <div class="d-flex justify-content-between">
                <h5 class="fw-bold">날짜 선택</h5>
                <div class="selectedDate" id="selectedDate"></div>
            </div>
            <div class="calendar-header">
                <button id="prev-month">&lt;</button>
                <span class="fw-bold" id="current-month">2025.03</span>
                <button id="next-month">&gt;</button>
            </div>
            <table class="calendar">
                <thead>
                    <tr>
                        <th>SUN</th>
                        <th>MON</th>
                        <th>TUE</th>
                        <th>WED</th>
                        <th>THU</th>
                        <th>FRI</th>
                        <th>SAT</th>
                    </tr>
                </thead>
                <tbody id="calendar-body"></tbody>
            </table>
            <div class="legend">
                <span class="unavailable p-2"></span>예약불가
                <span class="today p-2"></span>오늘
                <span class="selected p-2"></span>선택
            </div>
        </div>
    
        <div class="time-selection">
            <h2>시간 선택</h2>
            <div id="time-slots"></div>
        </div>
    </div>

  <script>
    $(document).ready(function () {
        // 달력과 시간 슬롯을 표시할 주요 DOM 요소를 선택합니다.
        const $calendarBody = $("#calendar-body"); // 달력의 날짜 부분
        const $currentMonth = $("#current-month"); // 현재 월 표시
        const today = new Date(); // 오늘 날짜를 가져옵니다.
        today.setHours(0, 0, 0, 0); // 시간, 분, 초, 밀리초를 0으로 설정
        let selectedDate = null; // 선택된 날짜를 저장할 변수
        let currentYear = today.getFullYear();
        let currentMonth = today.getMonth();

        /**
         * 달력을 렌더링하는 함수
         * @param {number} year - 렌더링할 연도의 값
         * @param {number} month - 렌더링할 월의 값 (0부터 시작)
         */
        function renderCalendar(year, month) {
            const firstDay = new Date(year, month, 1).getDay(); // 해당 월의 첫 번째 날의 요일 (0: 일요일 ~ 6: 토요일)
            const lastDate = new Date(year, month + 1, 0).getDate(); // 해당 월의 마지막 날짜
            const prevMonthLastDate = new Date(year, month, 0).getDate(); // 이전 달의 마지막 날짜

            $calendarBody.empty(); // 이전 달력 데이터를 초기화합니다.
            $currentMonth.text(`${year}.${String(month + 1).padStart(2, "0")}`); // 현재 월을 표시합니다.

            let date = 1; // 날짜 시작 값
            let prevMonthDate = prevMonthLastDate - firstDay + 1; // 이전 달 날짜 시작 값
            let nextMonthDate = 1; // 다음 달 날짜 시작 값

            for (let i = 0; i < 6; i++) { // 최대 주 수는 보통 한 달에 약 6주
                const $row = $("<tr></tr>"); // 새로운 행을 만듭니다.

                for (let j = 0; j < 7; j++) { // 한 주는 항상 7일로 구성됩니다.
                    const $cell = $("<td></td>"); // 새로운 셀을 만듭니다.

                    let cellDate; // 날짜 객체를 저장할 변수 선언

                    if (i === 0 && j < firstDay) {
                        // 첫 번째 행에서 첫날 이전은 이전 달의 마지막 주 날짜로 채웁니다.
                        $cell.text(prevMonthDate);

                        cellDate = new Date(year, month - 1, prevMonthDate); // 이전 달의 날짜 객체 생성
                        prevMonthDate++;
                    } else if (date > lastDate) {
                        // 마지막 날짜 이후는 다음 달의 날짜로 채웁니다.
                        $cell.text(nextMonthDate);

                        cellDate = new Date(year, month + 1, nextMonthDate); // 다음 달의 날짜 객체 생성
                        nextMonthDate++;
                    } else {
                        $cell.text(date); // 셀에 날짜를 설정합니다.

                        cellDate = new Date(year, month, date); // 이번 달의 날짜 객체 생성

                        if (cellDate.toDateString() === today.toDateString()) {
                            $cell.addClass("today"); // 오늘 날짜에 특별한 스타일을 추가합니다.
                        }

                        date++; // 다음 날짜로 이동합니다.
                    }

                    if(j === 0){
                        $cell.addClass("sun");
                    }else if(j === 6){
                        $cell.addClass("sat");
                    }

                    // 날짜 비활성화 처리
                    if (cellDate < today) {
                        $cell.addClass("unavailable");
                    } else {
                        // 이전달, 이번달, 다음달 모두 클릭이벤트 추가
                        $cell.on("click", function () {
                            selectDate(cellDate, $(this)); // 클릭 이벤트로 날짜를 선택합니다.
                        });
                    }

                    $row.append($cell); // 행에 셀을 추가합니다.
                }

                $calendarBody.append($row); // 달력 본문에 행을 추가합니다.
            }

            renderTimeSlots(); // 시간 슬롯을 렌더링합니다.
        }

        /**
         * 날짜 선택 함수
         * @param {Date} date - 선택된 날짜 객체
         * @param {jQuery} $cell - 선택된 셀 요소
         */
        function selectDate(date, $cell) {
            if ($cell.hasClass("unavailable")) {
                return; // 선택할 수 없는 날짜인 경우 함수를 종료합니다.
            }
            if (selectedDate) selectedDate.removeClass("selected"); // 이전 선택된 셀에서 스타일 제거

            selectedDate = $cell; // 현재 선택된 셀 저장
            selectedDate.addClass("selected"); // 선택 스타일 추가

            $("#selectedDate").text(formatDate(date)); // 선택된 날짜를 지정된 형식으로 표시

            renderTimeSlots(); // 시간 슬롯을 다시 렌더링합니다.
        }

        /**
         * 날짜를 "년.월.일 (요일)" 형식으로 변환하는 함수
         * @param {Date} date - 날짜 객체
         * @returns {string} - 포맷된 날짜 문자열
         */
            function formatDate(date) {
            const year = date.getFullYear();
            const month = date.getMonth() + 1; // getMonth()는 0부터 시작하므로 1을 더합니다.
            const day = date.getDate();
            const dayOfWeek = date.getDay(); // 0: 일요일, 1: 월요일, ..., 6: 토요일

            const daysOfWeek = ["일", "월", "화", "수", "목", "금", "토"]; // 요일 문자열 배열
            const dayOfWeekString = daysOfWeek[dayOfWeek]; // 해당 요일에 맞는 문자열 가져오기

            return `${year}.${month}.${day} (${dayOfWeekString})`; // 원하는 형식으로 조합하여 반환
        }

        /**
         * 시간 슬롯 렌더링 함수
         */
        function renderTimeSlots() {
            const $timeSlotsContainer = $("#time-slots"); // 시간 슬롯 컨테이너 선택
            $timeSlotsContainer.empty(); // 기존 시간 슬롯 초기화

            for (let hour = 9; hour <= 15; hour++) { // 예약 가능한 시간 범위 설정 (9시 ~ 15시)
                const $slot = $("<button></button>")
                    .text(`${hour}:00`) // 버튼 텍스트 설정
                    .addClass("time-slot"); // 버튼 스타일 클래스 추가

                $slot.on("click", function () {
                    alert(`${hour}:00 예약 완료!`); // 클릭 시 알림 메시지 표시
                });

                $timeSlotsContainer.append($slot); // 컨테이너에 버튼 추가
            }
        }

        /**
         * 이전/다음 월 이동 버튼 이벤트 처리
         */
        $("#prev-month").on("click", function () {
            if(currentYear === today.getFullYear() && currentMonth === today.getMonth()){
                return;
            }
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            renderCalendar(currentYear, currentMonth); // 달력을 다시 렌더링
        });

        $("#next-month").on("click", function () {
            if(currentYear === today.getFullYear() && currentMonth === today.getMonth()+1){
                return;
            }
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            renderCalendar(currentYear, currentMonth); // 달력을 다시 렌더링
        });

        /**
         * 초기 렌더링 실행
         */
        renderCalendar(currentYear, currentMonth);
    });


  </script>

    </main>

    <footer class="public-footer">
        © 2024 Total Admin. All rights reserved.
    </footer>
    <!-- <script src="/bootstrap/js/bootstrap.bundle.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function() {

            $("a[name='cate_all']").on("click", function(e) {
                e.preventDefault();

                $(this).parent().parent().find("a").removeClass("active");
                let secnod_cate = $("#secnod_cate");
                secnod_cate.empty();
                secnod_cate.html("여기다 카테고리 출력");


            });

        }); // ready end.
    </script>
</body>

</html>
