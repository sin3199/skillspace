<!doctype html>
<html lang="en" class="h-100" data-bs-theme="auto" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SkillSpace 어서오시오</title>

    <link rel="canonical" href="https://getbootstrap.kr/docs/5.3/examples/navbar-fixed/">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
    <!-- <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css" > -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">

    <!-- JQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        body {
            padding-top: 57px;
            background-color: #dee2e6;
        }

        .public-footer {
            background: #f8f9fa;
            padding: 0.5rem 0;
            font-size: 0.875rem;
            text-align: center;
            color: #6c757d;
            width: 100%;
        }

        .container {
            flex: 1;
        }

        .custom-toggler {
            display: block !important; /* 항상 보이도록 설정 */
            background: transparent;
            border: none;
        }

        .custom-toggler:hover {
            background: #e9ecef;
        }

        .custom-toggler .navbar-toggler-icon {
            width: 1.2em; /* 아이콘 크기 줄이기 */
            height: 1.2em;
        }

        .custom-hover {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            padding: 0.8rem 1rem;
        }
        .custom-hover:hover {
            background-color: #d2e0f5; /* 밝은 청록색 */
            color: #0A1828;
        }

        /* 카테고리 메뉴 스타일 */
        .nav-item .nav-link {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            padding: 0.8rem 1rem;
        }


    </style>


</head>

<body class="d-flex flex-column h-100">

    <header class="pt-3 bg-body-tertiary">
        <!-- 헤더 상단 -->
        <div class="container-fluid d-flex flex-wrap justify-content-center justify-content-md-between">
            <a href="/"
                class="d-flex align-items-center mb-2 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
                <span class="fs-4 fw-bold ms-md-2">SkillSpace</span>
            </a>
            <form class="col-12 col-md-auto " role="search">
                <div class="input-group">
                    <input type="text" class="form-control " name="keyword" id="keyword"
                        th:value="${pageMaker.cri.keyword}" placeholder="검색어 입력">
                    <button class="btn btn-outline-secondary btn-sm" type="submit">
                        <i class="bi bi-search"></i>
                    </button>
                </div>
            </form>
        </div>

        <!-- 헤더 하단 -->
        <nav class="navbar navbar-expand-md py-2 bg-body-tertiary">
            <div class="container-fluid d-flex flex-wrap justify-content-between">
                    <button class="navbar-toggler p-1 custom-toggler" type="button" data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasNavbarLight" aria-controls="offcanvasNavbarLight"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
        
                    <div class="collapse navbar-collapse" id="">
                        <ul class="navbar-nav me-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="#">여행/레저</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">아동/가족</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle active" href="#" role="button" data-bs-toggle="dropdown"
                                    aria-expanded="false">
                                    맛집/카페
                                </a>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#">할인권</a></li>
                                    <li><a class="dropdown-item" href="#">식사권</a></li>
                                    <li><a class="dropdown-item" href="#">교환권</a></li>
                                </ul>
                            </li>
                        </ul>
            
                    </div>
                    <ul class="nav">
                        <li class="nav-item"><a href="#" class="nav-link link-body-emphasis px-2">로그인</a></li>
                        <li class="nav-item"><a href="#" class="nav-link link-body-emphasis px-2">회원가입</a></li>
                    </ul>
            </div>
        </nav>

        <!-- 오프캔버스 -->
        <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbarLight"
            aria-labelledby="offcanvasNavbarLightLabel">
            <div class="offcanvas-header border-bottom">
                <h5 class="offcanvas-title" id="offcanvasNavbarLightLabel">SkillSpace</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <!-- 로그인 섹션 -->
                <div class="user-section border-bottom pb-3 mb-3">
                    <div th:if="${session.login_auth == null}">
                        <p class="mb-3">로그인하고 다양한 서비스를 이용해보세요!</p>
                        <div class="d-flex gap-2">
                            <a href="/guest/login" class="btn btn-outline-primary flex-grow-1">로그인</a>
                            <a href="/guest/join" class="btn btn-outline-primary flex-grow-1">회원가입</a>
                        </div>
                    </div>
                    <div th:if="${session.login_auth != null}">
                        <div class="d-flex align-items-center mb-3">
                            <div class="flex-grow-1 ms-3">
                                <p class="fw-bold mb-0" th:text="${session.login_name}">사용자명</p>
                                <small class="text-muted" th:text="${session.login_email}">이메일</small>
                            </div>
                        </div>
                        <div class="d-flex gap-2">
                            <a href="/guest/mypage" class="btn btn-outline-secondary flex-grow-1">마이페이지</a>
                            <a href="/guest/logout" class="btn btn-outline-secondary flex-grow-1">로그아웃</a>
                        </div>
                    </div>
                </div>

                <!-- 카테고리 메뉴 -->
                <div class="accordion" id="categoryAccordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button collapsed custom-hover" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                전체 카테고리
                            </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#categoryAccordion">
                            <div class="accordion-body py-1">
                                <div class="list-group list-group-flush">
                                    <a href="#" class="list-group-item list-group-item-action">전체보기</a>
                                    <a href="#" class="list-group-item list-group-item-action">인기 클래스</a>
                                    <a href="#" class="list-group-item list-group-item-action">신규 클래스</a>
                                    <a href="#" class="list-group-item list-group-item-action">프로그래밍</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                고객지원
                            </button>
                        </h2>
                        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#categoryAccordion">
                            <div class="accordion-body py-0">
                                <ul class="dropdown-menu position-static d-grid gap-1 p-2 rounded-3 mx-0 shadow w-220px" data-bs-theme="light">
                                    <li><a class="dropdown-item rounded-2 active" href="#">Action</a></li>
                                    <li><a class="dropdown-item rounded-2" href="#">Another action</a></li>
                                    <li><a class="dropdown-item rounded-2" href="#">Something else here</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item rounded-2" href="#">Separated link</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>


            </div><!-- offcanvas-body end -->
        </div>
    </header>



    <main class="container">
        <style>
            /* 예약 컨테이너 스타일 */
            .reservation-container {
                max-width: 100%;
                width: 100%;
                margin: 0;
                border-radius: 0;
                padding: 10px;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
                background-color: transparent;
            }
        
            /* 날짜 선택 섹션 */
            .date-selection h5 {
                color: #333;
                font-size: 18px;
            }
        
            .calendar-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-top: 10px;
            }
        
            .calendar-header button {
                background-color: #704de4;
                color: white;
                border: none;
                font-size: 16px;
                padding: 5px 10px;
                border-radius: 5px;
                cursor: pointer;
                transition: background-color 0.3s ease-in-out;
            }
        
            .calendar-header button:hover {
                background-color: #563bb7;
            }
        
            #current-month {
                font-size: 16px;
                font-weight: bold;
                color: #333;
            }

            .week {
                display: flex;
                flex-wrap: wrap;    /* 한 줄에 7개의 셀을 배치하고 줄 바꿈 */
                margin-top: 10px;
                width: 100%;
            }

            .week .dayOfWeek {
                flex: 0 0 calc(100% / 7);   /* 7일(일주일)을 기준으로 너비 설정 */
                aspect-ratio: 2 / 1;
                display: flex;
                justify-content: center;
                align-items: center;
                border: 1px solid #ddd;
                box-sizing: border-box;
                color: #999999;
                font-size: 1rem;
                font-weight: bold;
            }
        
            /* 달력 스타일 (Flexbox 사용) */
            .calendar {
                display: flex;
                flex-wrap: wrap;    /* 한 줄에 7개의 셀을 배치하고 줄 바꿈 */
                width: 100%;
                margin-top: 10px;
            }
        
            .calendar .day {
                flex: 0 0 calc(100% / 7);   /* 7일(일주일)을 기준으로 너비 설정 */
                aspect-ratio: 1 / 1;
                display: flex;
                justify-content: center;
                align-items: center;
                border: 1px solid #ddd;
                box-sizing: border-box;
                cursor: pointer;
                transition: all 0.2s;
                font-size: 1rem;
            }
        
            /* 작은 화면에서 폰트 크기 조정 */
            @media (max-width: 360px) {
                .calendar .day {
                    font-size: 0.7rem !important;
                }
                .week .dayOfWeek {
                    font-size: 0.7rem !important;
                }
            }
        
            /* 상태별 스타일 */
            .unavailable {
                background-color: #e6e6e6 !important;
                color: #b2b2b2 !important;
                pointer-events: none;
            }
        
            .today {
                background-color: #ffe066 !important;
                color: black !important;
            }
        
            .selected {
                background-color: #704de4 !important;
                color: white !important;
            }
        
            /* 요일별 색상 */
            .sat {
                color: #4a90e2 !important;
            }
        
            .sun {
                color: #e94e77 !important;
            }
        
            /* 선택된 날짜 표시 */
            .selectedDate {
                color: #704de4;
                font-size: 14px;
                font-weight: bold;
            }
        
            /* 범례 스타일 */
            .legend {
                font-size: 14px;
                margin-top: 10px;
            }
        
            .legend span {
                display: inline-block;
                width: 10px;
                height: 10px;
                margin-right: 5px;
            }
        
            /* 시간 선택 섹션 */
            .time-selection h2 {
                font-size: 18px;
                margin-top: 20px;
                color: #333333;
            }
        
            #time-slots button {
                background-color: white;
                border-radius: 5px;
                border: solid 1px #704de4;
                padding: 8px;
                margin-right: 5px;
                margin-bottom: 5px;
                cursor: pointer;
        
                transition: all ease-in-out .3s;
            }
        
            #time-slots button:hover {
                background: #ddd;
            }
        </style>
        
        

        <div class="card">

            <div class="reservation-container card mt-3">
                <div class="date-selection">
                    <div class="d-flex justify-content-between">
                        <h5 class="fw-bold">날짜 선택</h5>
                        <div class="selectedDate" id="selectedDate"></div>
                    </div>
                    <div class="calendar-header">
                        <button id="prev-month">&lt;</button>
                        <span class="fw-bold" id="current-month">2025.03</span>
                        <button id="next-month">&gt;</button>
                    </div>
                    <div>
                        <div></div>
                    </div>
                    <div class="week">
                        <div class="dayOfWeek">SUN</div>
                        <div class="dayOfWeek">MON</div>
                        <div class="dayOfWeek">TUE</div>
                        <div class="dayOfWeek">WED</div>
                        <div class="dayOfWeek">THU</div>
                        <div class="dayOfWeek">FRI</div>
                        <div class="dayOfWeek">SAT</div>
                    </div>
                    <div class="calendar">
                        <!-- 날짜 셀은 JavaScript로 동적으로 생성됩니다 -->
                    </div>
                    <div class="legend">
                        <span class="unavailable"></span>예약불가
                        <span class="today"></span>오늘
                        <span class="selected"></span>선택
                    </div>
                </div>
            
                <div class="time-selection">
                    <h2>시간 선택</h2>
                    <div id="time-slots"></div>
                </div>
            </div>
        </div>

  <script>
    $(document).ready(function () {
        const $calendar = $(".calendar");
    const $currentMonth = $("#current-month");
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    let selectedDate = null;
    let currentYear = today.getFullYear();
    let currentMonth = today.getMonth();

    /**
     * 달력을 렌더링하는 함수
     * @param {number} year - 렌더링할 연도의 값
     * @param {number} month - 렌더링할 월의 값 (0부터 시작)
     */
    function renderCalendar(year, month) {
        const firstDay = new Date(year, month, 1).getDay(); // 해당 월의 첫 번째 날의 요일 (0: 일요일 ~ 6: 토요일)
        const lastDate = new Date(year, month + 1, 0).getDate(); // 해당 월의 마지막 날짜
        const prevMonthLastDate = new Date(year, month, 0).getDate(); // 이전 달의 마지막 날짜

        $calendar.empty(); // 이전 달력 데이터를 초기화
        $currentMonth.text(`${year}.${String(month + 1).padStart(2, "0")}`); // 현재 월 표시

        // 달력에 표시될 날짜 수 (이전 달 + 현재 달 + 다음 달)
        const totalCells = 42; // 6주 * 7일

        // 이전 달 날짜 채우기
        for (let i = firstDay - 1; i >= 0; i--) {
            const prevDate = prevMonthLastDate - i;
            const $cell = createDayCell(prevDate, year, month - 1);
            $calendar.append($cell);
        }

        // 현재 달 날짜 채우기
        for (let date = 1; date <= lastDate; date++) {
            const $cell = createDayCell(date, year, month);
            $calendar.append($cell);
        }

        // 다음 달 날짜 채우기
        const remainingCells = totalCells - (firstDay + lastDate);
        for (let date = 1; date <= remainingCells; date++) {
            const $cell = createDayCell(date, year, month + 1);
            $calendar.append($cell);
        }
        renderTimeSlots();
    }

    /**
     * 날짜 셀을 생성하는 함수
     * @param {number} date - 날짜
     * @param {number} year - 연도
     * @param {number} month - 월 (0부터 시작)
     * @returns {jQuery} - 생성된 날짜 셀 jQuery 객체
     */
    function createDayCell(date, year, month) {
        const $cell = $("<div class='day'></div>").text(date);
        const cellDate = new Date(year, month, date);

        // 요일에 따른 클래스 추가
        const dayOfWeek = cellDate.getDay();
        if (dayOfWeek === 0) $cell.addClass("sun");
        else if (dayOfWeek === 6) $cell.addClass("sat");

        // 오늘 날짜 처리
        if (cellDate.toDateString() === today.toDateString()) {
            $cell.addClass("today");
        }

        // 날짜 비활성화 처리 (오늘 이전 날짜는 선택 불가)
        if (cellDate < today) {
            $cell.addClass("unavailable");
        } else {
            $cell.on("click", function () {
                selectDate(cellDate, $(this));
            });
        }

        return $cell;
    }

    /**
     * 날짜 선택 함수
     * @param {Date} date - 선택된 날짜 객체
     * @param {jQuery} $cell - 선택된 셀 요소
     */
    function selectDate(date, $cell) {
        if ($cell.hasClass("unavailable")) return;
        if (selectedDate) selectedDate.removeClass("selected");
        selectedDate = $cell;
        selectedDate.addClass("selected");
        $("#selectedDate").text(formatDate(date));
        renderTimeSlots();
    }

    /**
     * 날짜를 "년.월.일 (요일)" 형식으로 변환하는 함수
     * @param {Date} date - 날짜 객체
     * @returns {string} - 포맷된 날짜 문자열
     */
    function formatDate(date) {
        const year = date.getFullYear();
        const month = date.getMonth() + 1;
        const day = date.getDate();
        const dayOfWeek = date.getDay();
        const daysOfWeek = ["일", "월", "화", "수", "목", "금", "토"];
        const dayOfWeekString = daysOfWeek[dayOfWeek];
        return `${year}.${month}.${day} (${dayOfWeekString})`;
    }

    /**
     * 이전/다음 월 이동 버튼 이벤트 처리
     */
    $("#prev-month").on("click", function () {
        if (currentYear === today.getFullYear() && currentMonth === today.getMonth()) {
            return; // 오늘 이전으로는 이동 불가
        }
        currentMonth--;
        if (currentMonth < 0) {
            currentMonth = 11;
            currentYear--;
        }
        renderCalendar(currentYear, currentMonth);
    });

    $("#next-month").on("click", function () {
        if(currentYear === today.getFullYear() && currentMonth === today.getMonth()+1){
                return;
            }
        currentMonth++;
        if (currentMonth > 11) {
            currentMonth = 0;
            currentYear++;
        }
        renderCalendar(currentYear, currentMonth);
    });

    /**
     * 초기 렌더링 실행
     */
    renderCalendar(currentYear, currentMonth);

    /**
     * 시간 슬롯 렌더링 함수
     */
        function renderTimeSlots() {
        const $timeSlotsContainer = $("#time-slots"); // 시간 슬롯 컨테이너 선택
        $timeSlotsContainer.empty(); // 기존 시간 슬롯 초기화

        for (let hour = 9; hour <= 15; hour++) { // 예약 가능한 시간 범위 설정 (9시 ~ 15시)
            const $slot = $("<button></button>")
                .text(`${hour}:00`) // 버튼 텍스트 설정
                .addClass("time-slot"); // 버튼 스타일 클래스 추가

            $slot.on("click", function () {
                alert(`${hour}:00 예약 완료!`); // 클릭 시 알림 메시지 표시
            });

            $timeSlotsContainer.append($slot); // 컨테이너에 버튼 추가
        }
    }
    });


  </script>

    </main>

    <footer class="public-footer">
        © 2024 Total Admin. All rights reserved.
    </footer>
    <!-- <script src="/bootstrap/js/bootstrap.bundle.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function() {

            $("a[name='cate_all']").on("click", function(e) {
                e.preventDefault();

                $(this).parent().parent().find("a").removeClass("active");
                let secnod_cate = $("#secnod_cate");
                secnod_cate.empty();
                secnod_cate.html("여기다 카테고리 출력");


            });

        }); // ready end.
    </script>
</body>

</html>
