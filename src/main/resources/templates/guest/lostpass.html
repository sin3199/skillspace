<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:laout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layouts/layout1}">
	  
	  <th:block layout:fragment="content">
		  <div class="row mt-5">
		<div class="col-6">
			<h3>아이디 찾기</h3>
			<div class="mb-3">
				<label for="u_name" class="form-label">이름</label>
				<input type="text" class="form-control" id="u_name" name="u_name" placeholder="이름을 입력">
			  </div>
			  <div class="mb-3">
				<label for="u_email1" class="form-label">이메일</label>
				<input type="text" class="form-control" id="u_email1" name="u_email" placeholder="이메일 입력">
			</div>
			<div class="mb-3 text-center">
				<button type="button" class="btn btn-primary" id="idsearch">아이디 찾기</button>
			</div>
		</div>
		<div class="col-6">
			<h3>임시 비밀번호 발급</h3>
			<div class="mb-3">
				<label for="u_id" class="form-label">아이디</label>
				<input type="text" class="form-control" id="u_id" name="u_id" placeholder="아이디를 입력">
			</div>
			<div class="mb-3">
				<label for="u_email2" class="form-label">이메일</label>
				<input type="	" class="form-control" id="u_email2" name="u_email" placeholder="이메일 입력">
			</div>
			<div class="mb-3 text-center">
				<button type="button" class="btn btn-primary" id="pwtemp">비밀번호 찾기</button>
			</div>
		</div>
	</div>
	
</th:block>
<th:block layout:fragment="scriptBottom">
	<script>
		$(document).ready(function() {

			// 아이디 찾기.  button : id="idsearch"
			$("#idsearch").on("click", function(){

				$.ajax({
					url : "/userinfo/idsearch",
					type : "get",
					data : {u_name : $("#u_name").val(),
							  u_email : $("#u_email1").val() },	// 자바스크립트 Object문법
					dataType : "text",
					success : function(result) {
						if(result == "success"){
							alert("아이디를 메일로 발송했습니다.");
						}else if(result == "fail"){
							alert("이름 또는 이메일이 틀렸습니다.")
						}
						$("#u_name").val("");	// 이름 지우기
						$("#u_email1").val("");	// 메일 지우기
					}
				});
			});

			// 임시 비밀번호 발급.  button : id="pwtemp"
			$("#pwtemp").on("click", function() {
				
				$.ajax({
					url : "/userinfo/pwtemp",
					type : "get",
					data : {u_id : $("#u_id").val(),
							  u_email : $("#u_email2").val() },	// 자바스크립트 Object문법
					dataType : "text",
					success : function(result) {
						if(result == "success"){
							alert("임시 비밀번호를 메일로 발송했습니다.");
							location.href = "/userinfo/login"
						}else if(result == "fail"){
							alert("아이디 또는 이메일이 틀렸습니다.")
							$("#u_id").val("");	// 이름 지우기
							$("#u_email2").val("");	// 메일 지우기
						}
					}
				});
			});
		});
	</script>
</th:block>
</html>